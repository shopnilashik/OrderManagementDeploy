sap.ui.define(["./BaseController","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/m/Dialog","sap/m/List","sap/m/StandardListItem","sap/m/Button","sap/m/TableSelectDialog","sap/m/ColumnListItem","sap/m/Text","sap/m/Column","sap/m/ObjectIdentifier","sap/m/MessageToast","sap/base/security/encodeURLParameters","sap/ui/table/Table"],function(e,t,i,n,s,a,r,l,o,u,d,h,p,c,I,m,g){"use strict";var b=true;return e.extend("derga.ordermanagement.controller.Header",{onInit:function(){var e={lan:this.getLanguge()};var t=new s(e);this.getView().setModel(t,"lan");this._shiptoEvent();this._carrierEvent()},updateAllShipDatas(){this.getOwnerComponent().getEventBus().publish("PartnerShipToChannel","PartnerShipToEvent")},updateAllCarrierDatas(){this.getOwnerComponent().getEventBus().publish("PartnerCarrierChannel","PartnerCarrierEvent")},onCustomerDialog:function(){var e=this.getView();if(!this._pValueHelpDialogs){this._pValueHelpDialogs=t.load({id:e.getId(),name:"derga.ordermanagement.view.fragments.Customer",controller:this}).then(function(t){e.addDependent(t);return t})}this._pValueHelpDialogs.then(function(e){e.open()}.bind(this))},selectCustomer(e){let t=e.getParameter("rowContext").getObject();let i=this.byId("customerInput");let n=t.businessPartner_ID;let s=t.name;let a=this.bindTextAndCode(s,n);this.allowShip();let r=t.salesOrganizationName;let l=t.salesOrganization_ID;let o=this.bindTextAndCode(r,l);let u=t.distributionChannelName;let d=t.distributionChannel_ID;let h=this.bindTextAndCode(u,d);let p=t.divisionName;let c=t.division_ID;let I=this.bindTextAndCode(p,c);this.setCustomerCode(n,l,d,c);i.setValue(a);let m=t.customerPaymentTerm_ID;this.getView().byId("provgince").setSelectedKey(m);this._setTextFieldValue(o,"selectSheet3");this._setTextFieldValue(h,"selectSheet4");this._setTextFieldValue(I,"selectSheet6");this._onPartnerBinding();this.closeCustomer()},closeCustomer(){this.byId("customerDialog").close()},_onPartnerBinding(){this.getOwnerComponent().getEventBus().publish("PartnerChannel","PartnerEvent")},_setTextFieldValue(e,t){this.getView().byId(t).setValue(e)},handleSearch:function(e){var t=e.getParameter("value");var s=new i({filters:[new i("businessPartner_ID",n.Contains,t),new i("businessPartner/name",n.Contains,t)]});var a=e.getSource().getBinding("items");a.filter([s])},searchCusotmer(){var e=this.byId("customerSearch").getValue();this.byId("customerTables").getBinding("rows").changeParameters({$search:e})},filterRegions(e,t){let i=this.getView().byId(t);i.getBinding("items").changeParameters({$filter:`country_ID eq '${e}'`})},_shiptoEvent(){this.getOwnerComponent().getEventBus().subscribe("HeaderShipToChannel","HeaderShipToEvent",this._updatingAllShipData,this)},_carrierEvent(){this.getOwnerComponent().getEventBus().subscribe("HeaderCarrierChannel","HeaderCarrierEvent",this._updatingAllCarrierData,this)},_updatingAllCarrierData(){let e=this.getCarrierValue();this.byId("selectSheet12").setValue(e.carrier);this.setInputIdbySell({oSelectedItem:e.strah,inputID:"address2"});this.setInputIdbySell({oSelectedItem:e.cap,inputID:"postalCodeText2"});this.setInputIdbySell({oSelectedItem:e.city,inputID:"cityText2"});this.setInputIdbySell({oSelectedItem:e.province,inputID:"regionid2"});this.setInputIdbySell({oSelectedItem:e.country,inputID:"country2"});this.setInputIdbySell({oSelectedItem:e.recipientName,inputID:"pname"});this.filterRegions(e.countryID,"regionid2")},_updatingAllShipData(){let e=this.getShipToValue();this.byId("selectSheet8").setValue(e.shipto);this.setInputIdbySell({oSelectedItem:e.strah,inputID:"addressInput"});this.setInputIdbySell({oSelectedItem:e.cap,inputID:"postalCodeText"});this.setInputIdbySell({oSelectedItem:e.city,inputID:"cityText"});this.setInputIdbySell({oSelectedItem:e.province,inputID:"province"});this.setInputIdbySell({oSelectedItem:e.country,inputID:"country"});this.setInputIdbySell({oSelectedItem:e.recipientName,inputID:"cusName"});this.filterRegions(e.countryID,"province")}})});