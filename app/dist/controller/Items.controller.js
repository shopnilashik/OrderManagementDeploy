sap.ui.define(["./BaseController","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/m/Dialog","sap/m/List","sap/m/StandardListItem","sap/m/Button"],function(t,e,i,o,n,a,r,s,c){let l={};let u="";"use strict";return t.extend("derga.ordermanagement.controller.Items",{onInit:function(){var t={items:[{productName:"",Qty:"0",position:10}]};var e=new n({items:[{documentDate:"01.02.2022",outside:"External Reference",choice:"1st Choice",tone:11,caliber:"A",quantity:2e3},{documentDate:"01.02.2022",outside:"External Reference",choice:"1st Choice",tone:11,caliber:"A",quantity:2e3},{documentDate:"01.02.2022",outside:"External Reference",choice:"1st Choice",tone:11,caliber:"A",quantity:2e3},{documentDate:"01.02.2022",outside:"External Reference",choice:"1st Choice",tone:11,caliber:"A",quantity:2e3},{documentDate:"01.02.2022",outside:"External Reference",choice:"1st Choice",tone:11,caliber:"A",quantity:2e3}]});var i=new n({items:[{MatchId:"2000000000",choice:"1st Choice",tone:10,caliber:"A",quantity1:1e3,quantity2:250,quantity3:300,attributeMatch1:"Attrib 1",attributeMatch2:"Attrib 2",attributeMatch3:"Attrib 3",division:2030,warehouse:"M001"},{MatchId:"2000000000",choice:"1st Choice",tone:10,caliber:"A",quantity1:1e3,quantity2:250,quantity3:300,attributeMatch1:"Attrib 1",attributeMatch2:"Attrib 2",attributeMatch3:"Attrib 3",division:2030,warehouse:"M001"}]});var o=new n(t);this.getView().setModel(o,"items");this.getView().setModel(e,"oTable1");this.getView().setModel(i,"oTable2")},closeProduct(){this.byId("productDialog").close()},selectProduct:function(t){let e=t.getParameter("rowContext").getObject();const i=this.getModel("items");const o=i?.oData?.items||i?.oData;let a=[];if(l.ID){const t=o.findIndex(t=>t.ID==l.ID&&t.position==l.position);e.Qty=0;if(t||t==0){o[t]={position:o[t].position,...e};a=o;l={}}else{a=o;l={}}}else{e.Qty=0;const t=o.length*10;e.position=t;a=[...o.slice(0,o.length-1),e,{position:t+10,productName:"Select Product",Qty:"0"}]}const r=new n(a);this.getView().setModel(r,"items");this.closeProduct()},searchProduct:function(){const t=this.byId("productSearch").getValue();this.byId("productTables").getBinding("rows").changeParameters({$search:t})},onDateChange:function(t,e){let i=e?t:t.getParameters().value;i=new Date(i);const o=i.toLocaleString("en-US",{day:"2-digit",month:"short",year:"numeric"});u=o;return o},onRowPressed:function(t){try{this.setItemData(t);var e=new sap.ui.model.json.JSONModel(t);this.setModel(e,"testDrive");console.log("data sent");let i=this.getOwnerComponent().getRouter();i.navTo("SalesOrderMain")}catch(t){console.log("error",t)}},dateFormatter:function(t){const e=t&&this.onDateChange(t,true);return e},onProductDialog:function(t){if(!Array.isArray(t)&&t.hasOwnProperty("ID")){l=t}var i=this.getView();if(!this._pValueHelpDialogs){this._pValueHelpDialogs=e.load({id:i.getId(),name:"derga.ordermanagement.view.fragments.Product",controller:this}).then(function(t){i.addDependent(t);return t})}this._pValueHelpDialogs.then(function(t){t.open()}.bind(this))},onCreateItem(t){let e={Product:"gergrg",Qty:12};let i=t.getSource().getModel("items").getData();i.items=[e,...i.items];this.getView().getModel("items").setData(i)},onBatchDialog:function(){var t=this.getView();if(!this._pValueHelpDialogBatch){this._pValueHelpDialogBatch=e.load({id:t.getId(),name:"derga.ordermanagement.view.fragments.Batch",controller:this}).then(function(e){t.addDependent(e);return e})}this._pValueHelpDialogBatch.then(function(t){t.open()}.bind(this))},onSaveBatch:function(){this._pValueHelpDialogBatch.then(function(t){t.close()}.bind(this))}})});